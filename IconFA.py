from functools import lru_cache

from gdo.base.Render import Mode
from gdo.base.Trans import t
from gdo.base.Util import module_config_var
from gdo.ui.IconProvider import IconProvider


class IconFA(IconProvider):

    @classmethod
    @lru_cache
    def MAP(cls) -> dict:
        return {
            'account': 'user',
            'add': 'plus',
            'address': 'address-book',
            'alert': 'bell',
            'all': 'list',
            'amt': 'calculator',
            'arrow_down': 'sort-down',
            'arrow_left': 'arrow-left',
            'arrow_right': 'arrow-right',
            'arrow_up': 'sort-up',
            'audio': 'itunes-note',
            'back': 'arrow-left',
            'bank': 'piggy-bank',
            'bars': 'bars',
            'bee': 'cow',
            'bell': 'bell',
            'birthday': 'birthday-cake',
            'block': 'ban',
            'book': 'book',
            'bulb': 'lightbulb',
            'business': 'store',
            'calendar': 'calendar-alt',
            'captcha': 'lock',
            'caret': 'caret-right',
            'cc': 'address-card',
            'check': 'check',
            'close': 'window-close',
            'code': 'code',
            'color': 'palette',
            'copyright': 'copyright',
            'construction': 'person-digging',
            'country': 'flag',
            'create': 'plus-circle',
            'credits': 'credit-card',
            'cut': 'cut',
            'delete': 'minus-circle',
            'diamond': 'diamond',
            'done': 'check',
            'done_all': 'check-double',
            'download': 'download',
            'edit': 'edit',
            'email': 'envelope',
            'error': 'exclamation-triangle',
            'eye': 'eye',
            'face': 'user',
            'female': 'female',
            'file': 'paperclip',
            'flag': 'flag',
            'flash': 'bolt',
            'folder': 'folder',
            'font': 'font',
            'format': 'underline',
            'gender': 'venus-mars',
            'group': 'users',
            'guitar': 'guitar',
            'hands': 'hands',
            'heart': 'heart',
            'help': 'question-circle',
            'house': 'house',
            'icecream': 'ice-cream',
            'image': 'image',
            'info': 'info',
            'language': 'language',
            'legal': 'section',
            'level': 'trophy',
            'license': 'paragraph',
            'like': 'thumbs-up',
            'link': 'link',
            'list': 'th-list',
            'location': 'location-dot',
            'lock': 'lock',
            'magic': 'wand-magic-sparkles',
            'male': 'male',
            'medal': 'medal',
            'menu': 'bars',
            'message': 'comment-dots',
            'metal': 'hand-fist',
            'minus': 'minus',
            'money': 'money-bill',
            'name': 'id-badge',
            'numeric': 'hashtag',
            'password': 'key',
            'pause': 'pause-circle',
            'percent': 'percent',
            'phone': 'phone',
            'plus': 'plus',
            'position': 'map-marker',
            'print': 'print',
            'qrcode': 'qrcode',
            'question': 'question',
            'quote': 'quote-left',
            'remove': 'minus',
            'reply': 'reply',
            'required': 'asterisk',
            'schedule': 'clipboard-list',
            'score': 'coins',
            'search': 'search',
            'select': 'stack-exchange',
            'settings': 'cog',
            'shopping': 'bag-shopping',
            'spiderweb': 'dharmachakra',
            'star': 'star',
            'stop': 'stop',
            'sun': 'sun',
            'table': 'table',
            'tag': 'tags',
            'text': 't',
            'thumbs_up': 'thumbs-up',
            'thumbs_down': 'thumbs-down',
            'thumbs_none': 'hand-point-right',
            'time': 'stopwatch',
            'title': 'hashtag',
            'trophy': 'trophy',
            'unicorn': 'horse-head',
            'upload': 'upload',
            'url': 'link',
            'user': 'user',
            'users': 'users',
            'view': 'eye',
            'vote': 'vote-yea',
            'wait': 'hourglass-half',
            'whatsapp': 'whatsapp',
            'work': 'person-digging',
            'write': 'pencil',
        }

    @classmethod
    def display_icon_html(cls, name: str, mode: Mode, alt_key: str = None, alt_args: tuple[str|int|float,...]=None, color: str = None, size: str = None) -> str:
        ico = cls.MAP()[name]
        alt_key = alt_key or 'an_icon'
        alt_args = alt_args if alt_key else t(name)
        alt = f'role="img" aria-label="{t(alt_key, alt_args)}"'
        color = f" color: {color};" if color else ""
        size = f" font-size: {size};" if size else ""
        style = (color + size).strip()
        style = f' style="{style}"' if style else ''
        fas = module_config_var('icon_fa', 'fa_style')
        return f'<span class="gdt-icon gdt-fa-icon"{style}><i {alt} class="{fas} fa-{ico}"></i></span>'
